# 📘 Product Requirements Document (PRD)
## 서비스명: 감사일기 with AI 한줄 일기 (확장 버전)

---

## 🔍 목적

사용자가 매일 3가지 감사한 일을 감정과 함께 기록하면,  
Gemini-2.0-Flash를 통해 한줄 일기를 작성해주고, 
월간 감정 변화와 감사 습관을 시각적으로 리포팅하여  
감정 자각, 자기 돌봄, 긍정 감정 지속을 도와주는 심리 코칭형 감사일기 서비스.

---

## 🧱 핵심 기능 요약 (스코프 내 기능)

### 1. 감사일기 입력 인터페이스
- 날짜 선택 필드 추가 (기본: 오늘)
- 감사 항목 3개 입력 (50자 내외)
  - 나에 대한 감사
  - 타인에 대한 감사
  - 상황에 대한 감사
- 감정 선택 (단일): 행복, 기쁨, 뿌듯, 편안, 피곤, 우울
- 작성된 일기는 해당 날짜에 저장됨

---

### 2. Gemini API Key 입력 및 저장 기능
- 사용자가 본인의 Gemini 2.0 Flash API 키를 직접 입력
- API 키는 `localStorage`에 저장되어 새로고침해도 유지됨
- UI에서 키 등록 및 저장 상태를 확인 가능

---

### 3. AI 한줄일기 생성
- 사용자의 입력을 프롬프트로 구성해 Gemini API에 전달
- 각 항목을 바탕으로 한줄 일기 요약 1문장 생성 (40자 내외)
- 감정에 따라 요약 결과 방식이 달라짐 (※ 아래 참조)

#### AI 한줄일기 생성 규칙:

| 감정군 | 요약 구성 | 특징 |
|--------|------------|------|
| 행복/기쁨 | 가치/행동/선택 중심 + 잔잔한 응원 톤 | 밝고 따뜻한 말투 |
| 피곤/우울 | 심리적 추론 + 조용히 받아들이는 어조 | 공감적이고 차분한 말투 |
| 편안/뿌듯 | 현재 상태 수용 + 정서 유지 지지 | 유머러스하고 부드러운 말투 |

- 모든 응답은 40자 내외 × 1문장
- 문체는 담백하고 따뜻하게, 문학적 여운을 가볍게 풍기도록
- 감정은 직접 언급하지 말고 어조·단어·뉘앙스로 정서적 암시

---

### 4. 일기 저장 및 감정 기록 DB 구성
- 날짜별 일기, 감정, AI 한줄 요약을 로컬 저장 또는 서버 저장
- 저장 항목:
  - 날짜
  - 감정
  - 감사 항목 3개
  - AI 한줄 일기 요약

※ MVP에서는 localStorage로 저장, 이후 확장 시 Supabase, Firebase 등으로 마이그레이션 가능

---

### 5. 월간 감정 리포트 기능 (New)
- 사용자가 한 달간 작성한 감사일기에서 감정 데이터를 수집
- 아래 항목들을 자동 생성하여 월간 리포트로 제공:

#### 📊 리포트 구성 요소
- 감정 분포 차트 (파이차트 또는 바차트)
- 가장 자주 등장한 감정 TOP3
- 가장 자주 감사했던 키워드 추출 (ex. “가족”, “햇살”, “친구”)
- 나의 긍정률 (긍정감정 일기 비율)
- 리포트 요약 멘트 (ex. "이번 달, 당신은 60%의 날에 기쁨을 기록했어요.")

#### 리포트 페이지 특성:
- 해당 월 선택 가능
- 전체 일기 리스트도 아래에 미니 형태로 열람 가능
- 긍정률 또는 감정 변화 트렌드도 보여줌

---

## 🔧 기술 스택

| 기능 | 기술 |
|------|------|
| 프론트엔드 | React + TypeScript |
| 상태관리 | Zustand 또는 Context API |
| 저장 | localStorage (MVP), Firebase/Supabase (확장) |
| API 연동 | Gemini-2.0-Flash API (Google AI Studio) |
| 차트/리포트 | Chart.js 또는 Recharts |
| 스타일링 | Tailwind CSS |
| 배포 | Vercel 또는 Netlify |

---

## 🚧 단계별 개발 계획

### ✅ 1단계: 기본 MVP

- 감사일기 입력 폼
- 감정 선택
- Gemini API Key 등록 및 저장
- Gemini 응답 출력
- 날짜 필드 추가 (기본 오늘)
- 일기 입력 로컬 저장
- 일기 목록 UI 구성 (기본적인 날짜별 정렬)

---

### ✅ 2단계: 정서 피드백 & UX 개선

- 감정별 색상 테마 적용
- 로딩 애니메이션
- 감정별 문체 tone 조정
- 에러 처리 및 키 유효성 확인
- 캐릭터성 피드백 UI (ex. “오늘도 잘했어요 ☀️”)

---

### ✅ 3단계: 감정 통계 리포트 기능

- 감정별 통계 수집 (localStorage 기반)
- 월간 리포트 UI 페이지 구성
- 감정 차트, 긍정률 계산
- 월 선택 드롭다운 or 캘린더 뷰
- 리포트 요약 코멘트 자동 생성

---

## 🚫 제외 항목 (후속 개발 고려)

- 계정 시스템 (OAuth, 사용자별 DB 저장)
- 백엔드 구축
- 소셜 공유 기능
- 모바일 앱

---

## 📎 Gemini Prompt 구성 (요약)

```
당신은 감정에 섬세하게 반응하는 고급 감성 작가입니다.

사용자는 하루 동안 다음 네 가지 정보를 기록했습니다:
- 나에 대한 감사
- 타인에 대한 감사  
- 상황에 대한 감사
- 감정 (하루의 전반적인 정서: 행복, 뿌듯, 기쁨, 편안, 피곤, 우울 중 하나)

당신의 역할은 이 정보를 바탕으로, **사용자의 하루를 1문장(40자 내외)**으로 요약하는 것입니다.

## ✅ 반드시 반영할 요소:
1. 실제로 일어난 일 또는 구체적인 행동을 요약 안에 포함
2. 그 일이 사용자의 하루에 어떤 의미였는지를 간접적으로 묘사
3. 감정은 직접 언급하지 말고, 문장의 어조·단어·뉘앙스를 통해 정서적으로 암시
4. 문장은 반드시 40자 내외, 1문장, 느낌표/의문문/말줄임표 없이 작성
5. 말투는 담백하고 따뜻하게, 유머는 은근하게, 문학적 여운을 가볍게 풍기도록
```

---

## ✅ 성공 기준 (Success Criteria)

- 사용자의 80% 이상이 “피드백이 감정적으로 도움이 되었다”고 평가
- 월간 보고서를 통해 2회 이상 감정 패턴을 돌아본 사용자 비율 ≥ 50%
- 1주 이상 연속 기록 사용자 비율 ≥ 40%
